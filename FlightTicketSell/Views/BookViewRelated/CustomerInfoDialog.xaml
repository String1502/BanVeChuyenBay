<UserControl x:Class="FlightTicketSell.Views.CustomerInfoDialog"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:FlightTicketSell.Views"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:valueConverters="clr-namespace:FlightTicketSell.ValueConverters"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes" xmlns:validationRules="clr-namespace:FlightTicketSell.ValidateRules"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid>
        <Border Height="250"
                Width="600" 
                Background="White"
                Padding="20"
                CornerRadius="10" 
                Style="{StaticResource ResourceKey=DropShadow}" >
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!-- Heading -->
                <TextBlock Grid.ColumnSpan="6"
                           Grid.Row="0"
                           Text="{Binding Index, Converter={valueConverters:IndexToDisplayHeading}}"
                           d:Text="Khách hàng 1"
                           FontSize="20"
                           VerticalAlignment="Center"
                           FontWeight="Bold" />

                <!-- Customer information filling fields -->
                <Grid Grid.Row="1" Grid.RowSpan="5"
                      Grid.Column="0" Grid.ColumnSpan="6"
                      >

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="6*" />
                        <!-- Spacing -->
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="6*" />
                    </Grid.ColumnDefinitions>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="5*" />
                        <!-- Spacing -->
                        <RowDefinition Height="*" />
                        <RowDefinition Height="5*" />
                    </Grid.RowDefinitions>

                    <!-- Name -->
                    <TextBox x:Name="tbCustomerName"
                                    VerticalAlignment="Center"
                                    LostFocus="TextBox_LostFocus"
                                    Grid.Column="0" Grid.Row="0"
                                    materialDesign:HintAssist.Hint="Họ và tên"
                                    materialDesign:HintAssist.HelperText="VD: Nguyễn Văn A"
                                    Style="{StaticResource CustomTextbox}">
                        <TextBox.Text>
                            <Binding Path="NameBuffer" UpdateSourceTrigger="PropertyChanged">
                                <Binding.ValidationRules>
                                    <validationRules:StringNotEmptyRule />
                                </Binding.ValidationRules>
                            </Binding>
                        </TextBox.Text>
                    </TextBox>

                    <!-- CMND -->
                    <TextBox x:Name="tbCustomerID"
                                        PreviewTextInput="PreviewTextInput"
                                        VerticalAlignment="Center"
                                        Grid.Column="2" Grid.Row="0"
                                        LostFocus="TextBox_LostFocus"
                                        materialDesign:HintAssist.Hint="CMND"
                                        materialDesign:HintAssist.HelperText="VD: 312509001"
                                        Style="{StaticResource CustomTextbox}">

                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="LostFocus">
                                <i:InvokeCommandAction Command="{Binding CustomerIDCheck}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>

                        <TextBox.Text>
                            <Binding Path="IDBuffer" UpdateSourceTrigger="PropertyChanged">
                                <Binding.ValidationRules>
                                    <validationRules:StringNotEmptyRule />
                                </Binding.ValidationRules>
                            </Binding>
                        </TextBox.Text>
                    </TextBox>

                    <!-- Phone number -->
                    <TextBox x:Name="tbCustomerPhoneNumber"
                                                PreviewTextInput="PreviewTextInput"
                                                VerticalAlignment="Center"
                                                Grid.Column="0" Grid.Row="2"
                                                materialDesign:HintAssist.Hint="Số điện thoại"
                                                materialDesign:HintAssist.HelperText="VD: 0359723000"
                                                Style="{StaticResource CustomTextbox}">
                        <TextBox.Text>
                            <Binding Path="PhoneNumBuffer" UpdateSourceTrigger="PropertyChanged" />
                        </TextBox.Text>
                    </TextBox>

                    <!-- Email -->
                    <TextBox x:Name="tbCustomerEmail"
                                        VerticalAlignment="Center"
                                        Grid.Column="2" Grid.Row="2"
                                        materialDesign:HintAssist.Hint="Email" 
                                        materialDesign:HintAssist.HelperText="VD: nguyenvana@gmail.com"
                                        Style="{StaticResource CustomTextbox}">
                        <TextBox.Text>
                            <Binding Path="EmailBuffer" UpdateSourceTrigger="PropertyChanged">
                                <Binding.ValidationRules>
                                    <validationRules:MailFormatRule />
                                </Binding.ValidationRules>
                            </Binding>
                        </TextBox.Text>
                    </TextBox>

                </Grid>
                
                <!-- Close button -->
                <Button
                    Grid.Column="0" Grid.ColumnSpan="2"
                    Grid.Row="7" Grid.RowSpan="1"
                    Style="{StaticResource MaterialDesignFlatButton}"
                    IsCancel="True"
                    Command="{x:Static materialDesign:DialogHost.CloseDialogCommand}"
                    Content="Thoát"
                    FontWeight="Bold">
                </Button>
                
                <!-- Save button -->
                <Button 
                    Grid.Column="4" Grid.ColumnSpan="2"
                    Grid.Row="7" Grid.RowSpan="1"
                    Content="Lưu"
                    BorderThickness="0"
                    Background="OrangeRed"
                    Command="{Binding SaveCustomerCommand}"
                    Height="30"
                    FontSize="16"
                    FontWeight="Bold"
                    VerticalAlignment="Center"
                    materialDesign:ShadowAssist.Darken="True">
                </Button>
            </Grid>
        </Border>
    </Grid>
</UserControl>
